
系统 A 前端开发需求说明书

## 1. 引言

本文档为系统 A 的前端开发提供详细的需求说明。系统 A 是一个通过提交代码到 GitHub 并触发流水线来管理基础设施资源的系统。现需扩展其功能，支持用户管理应用程序（APP）及 Google Kubernetes Engine（GKE）命名空间。本说明书描述了前端界面的功能、用户交互流程及与后端集成的要点，确保开发团队准确实现预期功能。

------

## 2. 用户流程

### 2.1 用户登录

- **功能描述**：
  提供登录页面，用户通过输入凭据（如用户名和密码）访问系统。
- **交互要求**：
  - 用户输入凭据后，点击“登录”按钮。
  - 登录成功后，跳转至用例管理页面。
  - 登录失败时，显示错误提示（如“用户名或密码错误”）。

### 2.2 用例管理

- **功能描述**：
  用户登录后，若无用例，引导创建新用例；若有，展示用例列表。
- **交互要求**：
  - **无用例情况**：
    - 显示提示：“您尚未创建任何用例，请创建一个新用例”。
    - 提供“创建用例”按钮，点击后弹出表单。
  - **创建用例表单**：
    - **字段**：
      - 用例名称（必填，文本输入）
      - 描述（选填，文本区域）
    - 提交后，用例显示在用例管理页面。
  - **用例列表**：
    - 以卡片或列表形式展示，包含用例名称和描述。
    - 点击用例，进入应用程序管理界面。

### 2.3 应用程序（APP）接入

- **功能描述**：
  在选定用例内，用户可接入新应用程序，定义其环境及依赖关系。
- **交互要求**：
  - **入口**：用例管理页面提供“接入新应用程序”按钮。
  - **接入表单**：
    - **应用程序名称**：必填，唯一。
    - **环境定义**：
      - 点击“添加环境”按钮添加环境。
      - 每个环境需指定：
        - 环境名称（如 dev、sit、prod，必填）。
        - 依赖关系（可选，下拉菜单或复选框选择其他环境）。
      - 支持动态添加多个环境。
    - **验证**：确保无循环依赖（如 prod 依赖 sit，sit 依赖 prod）。
  - **提交**：数据发送至后端，后端创建 GitHub 仓库和 GKE 命名空间，前端显示结果。

### 2.4 环境管理

- **功能描述**：
  用户可查看和管理应用程序的环境。
- **交互要求**：
  - **环境列表**：
    - 以表格或列表展示，包含：
      - 环境名称
      - 依赖关系（列出依赖的其他环境）
      - 状态（如“仓库已创建”、“命名空间已创建”）
    - 可选支持排序或筛选。
  - **操作**：
    - 编辑环境：修改名称或依赖。
    - 触发流水线：手动触发特定环境的流水线（若后端支持）。

### 2.5 依赖关系可视化

- **功能描述**：
  直观展示环境间依赖关系。
- **交互要求**：
  - 在环境管理页面，使用树形图或图形（如 dev → sit → prod）展示。
  - 图表支持交互（点击节点查看详情）。

------

## 3. 用户界面要求

- **布局**：
  - 简洁直观，采用一致风格（如卡片表示用例和应用程序，表格表示环境）。
  - 使用面包屑导航或菜单，便于切换。
- **表单**：
  - 输入字段需验证（如必填字段未填时提示）。
  - 提交失败时显示具体错误信息。
- **反馈**：
  - 使用通知或弹窗提示操作结果。
- **响应式设计**：
  - 适配桌面和移动端。

------

## 4. API 集成

- **功能描述**：
  前端与后端 API 交互完成核心功能。
- **API 列表**：
  - 用户认证：登录验证。
  - 用例管理：创建和获取用例。
  - 应用程序管理：接入和管理 APP 及其环境。
  - 环境状态更新：获取仓库和命名空间状态。
- **交互要求**：
  - 处理 API 错误，显示友好提示。
  - 异步操作通过轮询或 WebSocket 更新状态。

------

## 5. 安全性

- **要求**：
  - 使用 HTTPS 传输数据，安全存储认证令牌。
  - 支持多角色用户时，实现基于角色的访问控制。

------

## 6. 本地化与可访问性

- **本地化**：
  - 默认支持中文，未来可扩展其他语言。
- **可访问性**：
  - 遵循 WCAG 2.1，支持屏幕阅读器和键盘导航。

------

## 7. 非功能性需求

- **兼容性**：
  - 支持主流浏览器（Chrome、Firefox、Safari、Edge）最新版本。
- **性能**：
  - 优化页面加载时间，确保流畅体验。
- **并发**：
  - 支持多用户同时操作，保持稳定。

------

## 8. 未来考虑

- **扩展性**：
  - 支持多个 GKE 集群选择。
- **增强功能**：
  - 提供复杂依赖关系可视化工具。
  - 集成监控工具，实时显示环境状态。

- - 以下是基于用户需求为前端开发团队提供的需求说明书，旨在实现展示APP的image部署记录并按环境维度展示部署进展的功能。
  
    ------
  
    需求说明书
  
    1. 功能概述
  
    - **目标**：在系统上提供一个页面，用于展示APP的image部署记录，并按环境维度展示部署进展。
    - **用户需求**：用户需要在系统上查看特定APP在不同环境下的image部署状态和历史记录，数据来源于数据库中存储的container image tag信息和deploy状态。
    - 页面设计
  
    - **页面位置**：在现有APP管理页面下，新增一个“部署记录”页面。
    - **页面布局**：
      - **顶部**：显示当前APP名称，并提供环境选择的下拉菜单。
      - **中部**：以表格形式展示部署记录。
      - **底部**：分页控件，用于切换记录页数。
    - 数据展示
  
    - **数据来源**：从数据库中获取指定APP的image部署记录。
    - **展示内容**：
      - 部署时间（例如：2023-10-15 14:30:00）
      - image tag（例如：v1.2.3）
      - 部署状态（成功/失败）
      - 部署环境（例如：dev、test、prod）
    - **展示方式**：
      - 默认按环境维度展示，支持通过环境选择切换查看不同环境的部署记录。
      - 支持按部署时间排序（默认降序，最新的记录靠前）。
    - 用户交互
  
    - **环境选择**：用户通过顶部下拉菜单选择目标环境，页面自动刷新并展示对应环境的部署记录。
    - **分页功能**：支持分页展示，每页默认显示10条记录，用户可通过底部分页控件切换页面。
    - **搜索功能**：提供按image tag搜索的功能，用户输入tag后可快速过滤相关部署记录。
    - 技术要求
  
    - **前端框架**：使用React.js进行开发。
  
    - **API接口**：后端需提供API接口，用于获取APP的部署记录数据。
  
    - **数据格式**：API返回数据采用JSON格式，例如：
  
      json
  
      ```json
      {
        "app_name": "example-app",
        "environment": "prod",
        "deploy_records": [
          {
            "deploy_time": "2023-10-15 14:30:00",
            "image_tag": "v1.2.3",
            "status": "success",
            "environment": "prod"
          },
          ...
        ]
      }
      ```
  
    - 安全与权限
  
    - **权限控制**：仅允许有查看权限的用户访问该页面及数据。
    - **数据安全**：确保API数据传输使用HTTPS，数据库存储需符合安全规范。
    - 其他要求
  
    - **响应式设计**：页面需适配桌面端和移动端，确保在不同设备上的良好体验。
    - **性能优化**：页面加载时间需控制在合理范围内，确保大数据量时展示流畅。
  
    ------
  
    以上需求说明书详细描述了“部署记录”页面的功能、设计、交互和技术要求，前端开发团队可依据此文档进行开发。如有疑问，可随时沟通确认。

